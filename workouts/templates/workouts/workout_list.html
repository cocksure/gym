{% extends 'base.html' %}
{% load static %}

{% block title %}Мои тренировки{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/workout_list.css' %}">
{% endblock %}

{% block content %}
<div class="fade-in">
    <div class="page-header">
        <h1 class="mb-2">
            <i class="fas fa-dumbbell workout-icon-pulse"></i> Мои тренировки
        </h1>
        <p class="motivation-text">Превращай пот в силу! Каждая тренировка — шаг к твоей цели!</p>
    </div>

    <div class="stats-grid">
        <div class="stat-card stat-card-workouts">
            <div class="stat-icon">
                <i class="fas fa-fire"></i>
            </div>
            <div class="stat-value">{{ workouts.count }}</div>
            <div class="stat-label">Всего тренировок</div>
        </div>
        <div class="stat-card stat-card-exercises">
            <div class="stat-icon">
                <i class="fas fa-trophy"></i>
            </div>
            <div class="stat-value">
                {% with total_exercises=workouts|length %}
                    {{ total_exercises }}
                {% endwith %}
            </div>
            <div class="stat-label">Упражнений выполнено</div>
        </div>
    </div>

    <a href="{% url 'create-workout' %}" class="btn btn-success mb-3">
        <i class="fas fa-plus"></i> Начать новую тренировку
    </a>

    {% if workouts %}
    <div class="workout-list-grid">
        {% for workout in workouts %}
        <div class="workout-card">
            <div class="workout-content">
                <div class="card-header">
                    {% if workout.name %}
                    <h3 class="workout-name-title">{{ workout.name }}</h3>
                    {% endif %}
                    <p class="workout-date">
                        <i class="fas fa-calendar-day"></i> {{ workout.date|date:"j E Y" }}
                    </p>
                </div>

                <div class="mb-2">
                    <p><strong><i class="fas fa-list-check"></i> Упражнений:</strong> {{ workout.workout_exercises.count }}</p>
                    {% if workout.notes %}
                    <p class="mb-1"><strong><i class="fas fa-note-sticky"></i> Заметки:</strong></p>
                    <p style="color: var(--gray); font-size: 0.9rem;">{{ workout.notes|truncatewords:15 }}</p>
                    {% endif %}
                </div>
            </div>

            <a href="{% url 'workout-detail' workout.pk %}" class="btn btn-primary w-100">
                <i class="fas fa-eye"></i> Подробнее
            </a>
        </div>
        {% endfor %}
    </div>

    {% if is_paginated %}
    <div class="pagination-container">
        <div class="pagination">
            {% if page_obj.has_previous %}
            <a href="?page=1" class="pagination-btn">
                <i class="fas fa-angle-double-left"></i>
            </a>
            <a href="?page={{ page_obj.previous_page_number }}" class="pagination-btn">
                <i class="fas fa-angle-left"></i>
            </a>
            {% endif %}

            <span class="pagination-info">
                Страница {{ page_obj.number }} из {{ page_obj.paginator.num_pages }}
            </span>

            {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}" class="pagination-btn">
                <i class="fas fa-angle-right"></i>
            </a>
            <a href="?page={{ page_obj.paginator.num_pages }}" class="pagination-btn">
                <i class="fas fa-angle-double-right"></i>
            </a>
            {% endif %}
        </div>
    </div>
    {% endif %}
    {% else %}
    <div class="empty-state">
        <i class="fas fa-dumbbell"></i>
        <h3>Нет тренировок</h3>
        <p>Начните свою первую тренировку прямо сейчас!</p>
    </div>
    {% endif %}
</div>
{% endblock %}